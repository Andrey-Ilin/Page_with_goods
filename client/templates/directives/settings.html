<div class="row">
    <div class="col-md-6 col-md-offset-2">
        <div class="well" ng-if="error">{{error}}</div>
        <form class="form-horizontal" ng-submit="changeUserSettings(user)" name="changeSettings">
            <div class="form-group" ng-class="{ 'has-error' : changeSettings.firstName.$invalid && !changeSettings.firstName.$pristine }">
                <label for="firstName" class="col-sm-2 control-label">First Name</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="user.firstName" name="firstName" ng-maxlength="255">
                    <p ng-show="changeSettings.firstName.$invalid && !changeSettings.firstName.$pristine" class="help-block">Wrong format!</p>
                </div>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : changeSettings.lastName.$invalid && !changeSettings.lastName.$pristine }">
                <label for="lastName" class="col-sm-2 control-label">Second name</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="lastName" placeholder="Second name" ng-model="user.lastName" name="lastName" ng-maxlength="255">
                    <p ng-show="changeSettings.lastName.$invalid && !changeSettings.lastName.$pristine" class="help-block">Wrong format!</p>
                </div>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : changeSettings.email.$invalid && !changeSettings.email.$pristine }">
                <label for="email" class="col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="email" placeholder="Email" ng-model="user.email"
                    name="email" ng-pattern="/^([0-9a-zA-Z]([-_\\.]*[0-9a-zA-Z]+)*)@([0-9a-zA-Z]([-_\\.]*[0-9a-zA-Z]+)*)[\\.]([a-zA-Z]{2,9})$/"
                    required>
                    <p ng-show="changeSettings.email.$invalid && !changeSettings.email.$pristine" class="help-block">Wrong email format</p>
                </div>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : changeSettings.phone.$invalid && !changeSettings.phone.$pristine }">
                <label for="phone" class="col-sm-2 control-label">Phone</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="phone" placeholder="Phone" ng-model="user.phone" name="phone"
                    ng-pattern="/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/">
                    <p ng-show="changeSettings.phone.$invalid && !changeSettings.phone.$pristine" class="help-block">Wrong phone format</p>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default" ng-disabled="changePasswordMode || changeSettings.phone.$invalid || changeSettings.email.$invalid">Change settings</button>
                    <button type="button" class="btn btn-default" ng-click="openChangePasswordForm()">Change password</button>
                    <button type="button" class="btn btn-default" ng-click="cancelChanges()">Cancel & Exit</button>
                </div>
            </div>
        </form>


        <form class="form-horizontal" name="changePasswordForm" ng-submit="changePassword(password, user._id)" ng-if="changePasswordMode">
            <div class="form-group" ng-class="{ 'has-error' : changePasswordForm.password.$invalid && !changePasswordForm.password.$pristine }">
                <label for="password" class="col-sm-2 control-label">Password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="password" placeholder="Password" ng-model="password.password" required equals="{{password.password2}}"
                    name="password" ng-minlength="6" ng-maxlength="16" ng-pattern="/^[a-zA-Z0-9]*$/">
                    <p ng-show="changePasswordForm.password.$invalid && !changePasswordForm.password.$pristine" class="help-block">Wrong format!</p>
                </div>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : changePasswordForm.password2.$invalid && !changePasswordForm.password2.$pristine }">
                <label for="password2" class="col-sm-2 control-label">Confirm password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="password2" placeholder="Confirm password" ng-model="password.password2" required equals="{{password.password}}"
                    name="password2" ng-minlength="6" ng-maxlength="16" ng-pattern="/^[a-zA-Z0-9]*$/">
                    <p ng-show="changePasswordForm.password2.$invalid && !changePasswordForm.password2.$pristine" class="help-block">Not equal!</p>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default" ng-disabled="changePasswordForm.password.$invalid ||
                    changePasswordForm.password2.$invalid">Submit</button>
                    <button type="button" class="btn btn-default" ng-click="closeChangePassportMode()">Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>